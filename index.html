<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>The state of ES6</title>
    <style>
        body {
            background: #d7d8d2;
        }
        textarea {
            display: none;
        }

        img {
            max-width: 100%;
            max-height: 100%;
        }
        .no-margins {
            padding: 0;
        }

        .no-margins p {
            margin: 0;
        }
    </style>
</head>
<body>
    <textarea id="source">
        class: middle, center

        # The state of ES6

        ## Can we use it yet?

        Krzysztof Zbiciński  
        _k.zbicinski@gmail.com_  
        _@zbicin_  
        _http://zbic.in_

        ---

        # History 

        .center[
            ![IE vs Netscape](https://3.bp.blogspot.com/-M60wBEd-m5M/UA2j_xAro-I/AAAAAAAAAD0/vPn5H8zWLIA/s1600/ie-vs-netscape.jpg)  
            *http://royalmulti.blogspot.com.au/2012/07/holy-browser-wars.html*    
        ]

        ???
        
         * created in 1995 by Brendan Eich

         * based on Java, Scheme and Self

         * Java began in 1990 as a smart appliances language

         * Sun worked with Netscape to break the monopoly of IE

         * introduced in Netscape Navigator 2.0 in 1996

        ---

        # Why 'ECMAScript'?

        * Mocha ➔ LiveScript ➔ JavaScript - Netscape
        * JScript - Microsoft

        * ECMAScript - Ecma International (former European Computer Manufacturers Association)

        ---

        class: center, middle

        *ECMAScript was always an unwanted trade name that sounds like a skin disease.*  
        Brendan Eich  
        *https://mail.mozilla.org/pipermail/es-discuss/2006-October/000133.html*

        ---

         # Versioning

         * ES1 (Published in June 1997)

         * ES2 (June 1998)

         * ES3 (December 1999)

         * ES4 (abandoned)

         * ES5 (December 2009)

         * ES5.1 (June 2011)

         * ES6 (ES2015, June 2015)

         * ES7  (ES2016, June 2016)

        ---

        # Great, new features

        1. Arrow functions

        2. Modules

        3. Destructuring

        4. Generators

        5. Promises

        6. Template literals

        7. Spread operator

        8. New object literal features (including method definitions)

        9. let and const

        10. Rest parameters

        *http://www.2ality.com/2015/07/favorite-es6-features.html*

        ---

        class: middle, center

        ## Great, but

        # can we use it yet?

        ---

        name: yes-we-can

        class: middle, center, no-margins

        ![Yes we can](assets/images/yes-we-can.jpg)  
        *http://bcgavel.com/wp-content/uploads/2015/04/tumblr_md3p0xrgqy1r0z99do1_500.jpg*

        ---

        name: but

        class: middle, center

        ## but

        ---

        class: middle, center, no-margins

        ![Nope](assets/images/nope.jpg)  
        *http://foleycreekdesign.com/wp-content/uploads/2016/01/nope.jpg*

        ---

        # Compatibility

        * Implementations are still not perfect:

            * Node 6.5 - 97%

            * Chrome 56 - 97%

            * Firefox 52 - 94%

            * Edge 14 - 93%

        * Missing e.g. modules syntax (`import` and `export`).

        ---

        ```bash
        $ node -v
        v7.0.0
        ```

        ```js
        // a.js
        export let a = 'a';
        ```

        ```js
        // b.js
        import { a } from './a';
        console.log(a);
        ```

        ```bash
        $ node b.js 
        /tmp/b.js:2
        import { a } from './a';
        ^^^^^^
        SyntaxError: Unexpected token import
            at Object.exports.runInThisContext (vm.js:76:16)
            at Module._compile (module.js:545:28)
            at Object.Module._extensions..js (module.js:582:10)
            at Module.load (module.js:490:32)
            at tryModuleLoad (module.js:449:12)
            at Function.Module._load (module.js:441:3)
            at Module.runMain (module.js:607:10)
            at run (bootstrap_node.js:382:7)
            at startup (bootstrap_node.js:137:9)
            at bootstrap_node.js:497:3
        ```

        ---

        # Compatibility

        * http://kangax.github.io/compat-table/es6/
        
        * http://node.green/

        ---
        
        # Transpilers to the rescue

        * Transpilers take the ES6 code as an input and transform it into ES5 code which works 100% the same way and is supported by most environments.

        * ES6 code ➔ magic ➔ ES5 code

        ---

        ```bash
        $ ls
        a.es6.js  node_modules  package.json
        ```

        ```js
        // a.es6.js 
        export let a = 'a';
        ```

        ```bash
        $ ./node_modules/.bin/babel a.es6.js -o a.es5.js
        ```

        ```bash
        $ ls
        a.es5.js  a.es6.js  node_modules  package.json
        ```

        ```js
        // a.es5.js 
        'use strict';

        Object.defineProperty(exports, "__esModule", {
          value: true
        });
        var a = exports.a = 'a';
        ```

        ---

        # Transpilers to the rescue  

        * Babel (https://babeljs.io/)

        * Traceur (https://github.com/google/traceur-compiler)

        ---

        class: middle, center

        # Great, so can we use transpilers and everything will be fine?

        ---

        template: yes-we-can

        ---

        template: but

        ---

        template: but

        # something _may_ not be fine.

        ---

        # Transpilers - disadvantages

        * usually an additional step of build process

        * debugging issues if sourcemaps are not configured properly

        * potential slight performance loss (if any)

        ---

        # Transpilers - how to begin?

        The easiest way to start playing with ES6 are:

        * Babel REPL - https://babel.io/repl

        * Babel Require Hook

        * `babel-node`

        ---

        class: middle, center, no-margins

        ![Babel REPL](assets/images/babel-repl.png)  
        *https://babeljs.io/repl*

        ---

        # Babel's Require Hook

        ```bash
        $ npm install --save-dev babel-register babel-preset-es2015
        $ npm install --save-dev babel-polyfill
        ```

        ```js
        // .babelrc
        { "presets": ["es2015"]}
        ```

        Then, at the top of our main `.js` file:

        ```js
        // main.js
        require('babel/register');
        require('./src/app.js');
        ```

        Thanks to this, all of the further dependencies are transpiled on the fly:

        ```js
        // src/app.js
        import 'foo' from 'bar'; // works!

        let baz = () => Math.random(); // works!
        ```

        ---
        
        # `babel-node`

        ```js
        // a.js
        export let a = 'a';
        ```

        ```js
        // b.js
        import { a } from './a';
        console.log(a);
        ```

        ```js
        // .babelrc
        { "presets": ["es2015"] }
        ```

        ```bash
        $ npm install babel-cli
        # npm pretending it's busy
        $ ./node_modules/.bin/babel-node b.js
        a # works! 
        ```

        ---

        # Languages compiled to JavaScript
        
        * TypeScript (https://www.typescriptlang.org/)

        * Dart (https://www.dartlang.org/)

        * Clojure (http://clojure.org/)

        * CoffeScript (http://coffeescript.org/)

        ---

        class: middle, center

        # Thanks! 

    </textarea>
    <script src="assets/remark.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        remark.create();
    </script>
</body>
</html>